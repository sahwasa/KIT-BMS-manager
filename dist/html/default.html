

  
<!doctype html>
<html lang="ko">
<head >
	








<meta charset="UTF-8">
<title>폭염저감 요소기술별 효율성 분석 시스템</title>

<script src="plugins/jquery/dist/jquery.min.js"></script>
<script src="plugins/echarts/dist/echarts.min.js"></script>
<script type="text/javascript" src="/js/com.ajax.js"></script>
<!-- <script type="text/javascript" src="/js/common.js"></script> -->

<link rel="stylesheet" href="plugins/axicon/axicon.min.css" />

<link rel="stylesheet" href="css/style.css" />

<link rel="icon" href="img/log_gov.png" type="image/x-icon" />

 
</head>
<body >
	<div id="wrap">
		 









<div class="header">
  <h1><a href="">폭염저감 요소기술별 모니터링시스템</a></h1>
  <ul class="nav">
    <li id="tab_1"><a href="javascript:fn_btnClick('1');">신체냉각 요소기술</a></li>
    <li id="tab_2"><a href="javascript:fn_btnClick('2');">지상열 제어기술</a></li>
    <li id="tab_3"><a href="javascript:fn_btnClick('3');">상부공간 일사차폐기술</a></li>
    <li id="tab_4"><a href="javascript:fn_btnClick('4');">횡방향 벽면 냉각기술</a></li>
    <li id="tab_5"><a href="javascript:fn_btnClick('5');">저감기술 통합비교</a></li>
  </ul>
</div>

<script type="text/javascript">
var pageNo = '1';

$("#tab_"+pageNo).addClass("on");

function fn_btnClick(val){
	if(val=="2"){
		location.href="/mainTwo.do";
	}else if(val=="1"){
		location.href="/main.do";
	}else if(val=="3"){
		location.href="/mainThree.do";		
	}else if(val=="4"){
		location.href="/mainFour.do";	
	}else{
		location.href="/mainFive.do"
	}
}
</script> 

		 <div id="cont">
			









<div class="cont">
 <div class="section aside">
   <div class="article sensor">
     <div class="map">
       <img src="img/temp_map2.jpg" alt="지도">
       <div class="sensor_list">
         <button type="button" id="sensor1" class="btn_sensor" value="0000E415F64F4300" style="left:50%;top:5%">센서1</button>
         <button type="button" id="sensor2" class="btn_sensor on" value="0000E415F64D88AD" style="left:58%;top:20%" title="미세분무장치">센서2</button>
         <button type="button" id="sensor3" class="btn_sensor" value="0000B452A90C73AA" style="left:66%;top:38%">센서3</button>
         <button type="button" id="sensor4" class="btn_sensor" value="0000B452A9B1BE9E" style="left:14%;top:22%">센서4</button>
         <button type="button" id="sensor5" class="btn_sensor on" value="0000B452A90C3BA5" style="left:22%;top:9%" title="미설치">센서5</button>
         <button type="button" id="sensor6" class="btn_sensor" value="0000E415F64F3891" style="left:25%;top:4%">센서6</button>
         <button type="button" id="sensor7" class="btn_sensor" value="00002CAB33313E10" style="left:75%;top:80%">센서7</button>
         <button type="button" id="sensor8" class="btn_sensor" value="00002CAB3332F870" style="left:78%;top:86%">센서8</button>
         <!-- <button type="button" id="sensor9" class="btn_sensor" value="0000D436394A194B" style="left:78%;top:86%">센서9</button>  -->
       </div>
     </div>
     <div class="sensor_info">
       <dl>
         <dt>센서</dt>
         <dd id="sensorName"></dd>
         <dt>온 도</dt>
         <dd id="temp"></dd>
         <dt>습 도</dt>
         <dd id="humidity"></dd>
         <dt>배터리</dt>
         <dd id="battery"></dd> 
       </dl>
       <dl>
       	 <dt>센서</dt>
         <dd id="sensorName2"></dd>
         <dt>온 도</dt>
         <dd id="temp2"></dd>
         <dt>습 도</dt>
         <dd id="humidity2"></dd>
         <dt>배터리</dt>
         <dd id="battery2"></dd> 
       </dl>       
     </div>
   </div>
 </div>
 <div class="section contents">
   <div class="tit">
     <h2>
     <b>신체냉각 요소기술</b> &nbsp;
        <label><input type="radio" name="myCheck" value="1" checked>미세분무장치  / 송풍팬</label>
     </h2>
   </div>
   <div class="body">
     <div class="section flex_wrap">
       <div class="article present3">
         <div class="tit">
           <h3>현재 센서 관측 정보 &nbsp;<a style="font-size:14px;color:#b202a8;font-weight:600;"> 미세분무장치(센서2) / 미설치(센서5) </a></h3>
         </div>
         <ul>
           <li id="weather_temp">          
             <h4> - </h4>
           </li>
           <li id="globe_temp">
             <h4> - </h4>
           </li>
           <li id="nowHumidity">
             <h4> - </h4>
           </li>
           <li id="nowWind">
             <h4> - </h4>
           </li>
         </ul>
       </div>
       <div class="article my_town">
         <div class="tit">
           <h3>우리동네 온도&sol;습도 정보</h3>
           <span class="today_info" id="todayId"></span>
         </div>
         <div class="container weather_slide">
           <div class="slideWrap">
             <ul class="my_town_list slide_items" id="fcst_form">  
               <li class="now" id="now_form">
              	 <span class="time">현재</span>
                 <div class="temp">
                   <img src="img/weather/w_ico_cloude.png" width="32px" height="26px"  class="icon-DB01" alt="구름">9.6<span>℃</span>
                 </div>
                 <ul class="flex_wrap">
                   <li>체감온도 : <span>9℃</span></li>
                   <li>습도 : <span>3&percnt;</span></li>
                 </ul>
               </li>
               <li>
                 <span class="time"></span>
                 <div class="temp">
                   <img src="img/weather/w_ico_cloude.png" width="32px" height="26px"  class="icon-DB01" alt="구름"><span></span>
                 </div>
                 <ul class="flex_wrap">
                   <li><span></span></li>
                   <li><span></span></li>
                 </ul>
               </li>
               <li>
                 <span class="time"></span>
                 <div class="temp">
                   <img src="img/weather/w_ico_cloude.png" width="32px" height="26px"  class="icon-DB01" alt="구름"><span></span>
                 </div>
                 <ul class="flex_wrap">
                   <li><span></span></li>
                   <li><span></span></li>
                 </ul>
               </li>
               <li>
                 <span class="time"></span>
                 <div class="temp">
                   <img src="img/weather/w_ico_cloude.png" width="32px" height="26px"  class="icon-DB01" alt="구름"><span></span>
                 </div>
                 <ul class="flex_wrap">
                   <li><span></span></li>
                   <li><span></span></li>
                 </ul>
               </li>
               <li>
                 <span class="time"></span>
                 <div class="temp">
                   <img src="img/weather/w_ico_cloude.png" width="32px" height="26px"  class="icon-DB01" alt="구름"><span></span>
                 </div>
                 <ul class="flex_wrap">
                   <li><span></span></li>
                   <li><span></span></li>
                 </ul>
               </li>
               <li>
                 <span class="time">6시</span>
                 <div class="temp">
                   <img src="img/weather/w_ico_cloude.png" width="32px" height="26px"  class="icon-DB01" alt="구름"><span></span>
                 </div>
                 <ul class="flex_wrap">
                   <li><span></span></li>
                   <li><span></span></li>
                 </ul>
               </li>
               <li>
                 <span class="time">7시</span>
                 <div class="temp">
                   <img src="img/weather/w_ico_cloude.png" width="32px" height="26px"  class="icon-DB01" alt="구름"><span></span>
                 </div>
                 <ul class="flex_wrap">
                   <li><span></span></li>
                   <li><span></span></li>
                 </ul>
               </li>
               <li>
                 <span class="time"></span>
                 <div class="temp">
                   <img src="img/weather/w_ico_cloude.png" width="32px" height="26px"  class="icon-DB01" alt="구름"><span></span>
                 </div>
                 <ul class="flex_wrap">
                   <li><span></span></li>
                   <li><span></span></li>
                 </ul>
               </li>
             </ul>
           </div>
           <div class="slide_remote">
             <button type="button" class="btn_remote btn_prev" title="이전">이전</button>
             <button type="button" class="btn_remote btn_next" title="다음">다음</button>
           </div>
         </div>
       </div>
     </div>
     <div class="section graph_area">
       <div class="graph_wrap3">
         <div class="tit">
           <h3>온도 시간별 그래프</h3>
         </div>
         <div class="graph">
           <div id="echart_temp" class="echarts"></div>
         </div>
       </div>
       
       <div class="graph_wrap3">
         <div class="tit">
           <h3>흑구온도 시간별 그래프</h3>
         </div>
         <div class="graph">
		      <div id="echart_globeTemp" class="echarts"></div>
         </div>
       </div>
       
       <div class="graph_wrap3">
         <div class="tit">
           <h3>온도 및 흑구온도 일별 비교 그래프</h3>
         </div>
         <div class="graph">
           <div id="temp3" class="echarts"></div>
         </div>
       </div>
       
       <div class="graph_wrap3">
         <div class="tit">
           <h3>풍속 시간별 그래프</h3>
         </div>
         <div class="graph">
           <div id="echart_wind" class="echarts"></div>
         </div>
       </div>
       
       <div class="graph_wrap3">
         <div class="tit">
           <h3>습도 시간별 그래프</h3>
         </div>
         <div class="graph">
           <div id="echart_humidity" class="echarts"></div>
         </div>
       </div>
       
       <div class="graph_wrap3">
         <div class="tit">
           <h3>풍속 및 습도 일별 비교 그래프</h3>
         </div>
         <div class="graph">
           <div id="tump4" class="echarts"></div>
         </div>
       </div>
     </div>
   </div>
 </div>
</div> 

<script>
var timechk = "";
var sensor_gubun = "";	// A : 미세분무장치 , B : 송풍팬
var sensor_mac = "0000E415F64D88AD,0000B452A90C3BA5";  // 모델 : 센서 2 , 센서 5(미설치)

var date = new Date();
var yyyy = date.getFullYear();

var day1 = date.getDate()-2;
var day2 = date.getDate()-1;
//console.log(day1 + "," + day2);

var mm = ("0" + (date.getMonth() + 1)).slice(-2);
var dd1 = ("0" + day1).slice(-2);
var dd2 = ("0" + day2).slice(-2);
var dd3 = ("0" + date.getDate()).slice(-2);
var hh = date.getHours();

var preTime1 = mm+"."+dd1+" "+hh+"시";
var preTime2 = mm+"."+dd2+" "+hh+"시";
var preTime3 = mm+"."+dd3+" "+hh+"시";

var preTimArr = new Array();
preTimArr.push(preTime1);
preTimArr.push(preTime2);	
preTimArr.push(preTime3);


$(document).ready(function() {
	scadure_data(sensor_mac);
});
	
async function scadure_data(){
	fn_sensorInfo();
	await fn_vilageFcst();  		// 동네예보
	await fn_ultraSrtNcst();		// 우리동네 온도/습도 정보
	getLineAvgList();		// 현재 온도, 습도, 흑구온도, 풍속
	getBarAvgList();		// 온도 및 흑구온도 일별 비교 그래프, 풍속 및 습도 일별 비교 그래프
}


setInterval(function () {
	getLineAvgList();		// 현재 온도, 습도, 흑구온도, 풍속
 }, 200000);  //3분
 

//********************
// 현재 날짜
//********************
window.onload = function(){
	today();
}

function today(){
	var clock = document.getElementById("todayId");
	var today = new Date();
	clock.innerHTML = today.toLocaleString(); 
	setTimeout("today()", 1000);
}


//********************
//센서 정보
//********************
function fn_sensorInfo(){
	var params = "sensor_mac=0000E415F64D88AD,0000B452A90C3BA5";
	jsParamAjaxCall("POST", "/sensorInfo.do", params, function(response, status){
 		if (response.result != null) {
			if (response.result == "success") {
				var templist = response.templist;
				var humiditylist = response.humiditylist;
				if(templist.length>0 && humiditylist.length>0){
					$("#sensorName").text("미세분무장치");
					$("#model").text(templist[0].sensor_model);
					$("#temp").text(templist[0].ch_value+" ℃");
					$("#humidity").text(humiditylist[0].ch_value+" %");
					$("#battery").text(templist[0].battery);
					
					$("#sensorName2").text("미설치");
					$("#model2").text(templist[1].sensor_model);
					$("#temp2").text(templist[1].ch_value+" ℃");
					$("#humidity2").text(humiditylist[1].ch_value+" %");
					$("#battery2").text(templist[1].battery);
				}
			}
 		}
	});
	
}
//********************
//현재 관측 온도/습도
//********************
function fn_ultraSrtNcst() {
	
	var weatherHtml = '';
	var param = "sensor_gubun="+sensor_gubun;

	jsParamAjaxCall("POST", "/getUltraSrtNcst.do", param, function(response, status){
 		if (response.result != null) {
			if (response.result == "success") {
				
				//온도값 list
				var t1hList = response.t1hList;
				//습도값 list
				var rehList = response.rehList;
				//강수형태값 list
				var ptyList = response.ptyList;
				
				var pRainList = response.pRainList;
				
				var pWindList = response.pWindList;
				for(var i=0; i<t1hList.length; i++){
					weatherHtml += '<li class="now"><span class="time">현재</span>';
					
					if(ptyList[i]==0){ //강수 0일때
						weatherHtml += '<div class="temp"><img src="img/weather/w_ico_cloude.png" width="32px" height="26px"  class="icon-DB01" alt="구름">'+t1hList[i]+'<span>℃</span></div>';
					}else{
						//강수형태(PTY) 코드 : 없음(0), 비(1), 비/눈(2), 눈(3), 소나기(4), 빗방울(5), 빗방울/눈날림(6), 눈날림(7)
						if(ptyList[i]==1){ 
							weatherHtml += '<div class="temp"><img src="img/weather/w_ico_rainy.png" width="32px" height="26px"  class="icon-DB01" alt="비">'+t1hList[i]+'<span>℃</span></div>';
						}else if(ptyList[i]==2){
							weatherHtml += '<div class="temp"><img src="img/weather/w_ico_wetSnow.png" width="32px" height="26px"  class="icon-DB01" alt="비/눈">'+t1hList[i]+'<span>℃</span></div>';
						}else if(ptyList[i]==3){
							weatherHtml += '<div class="temp"><img src="img/weather/w_ico_snow.png" width="32px" height="26px"  class="icon-DB01" alt="눈">'+t1hList[i]+'<span>℃</span></div>';
						}else if(ptyList[i]==4){
							weatherHtml += '<div class="temp"><img src="img/weather/w_ico_showers.png" width="32px" height="26px"  class="icon-DB01" alt="소나기">'+t1hList[i]+'<span>℃</span></div>';
						}else if(ptyList[i]==5){
							weatherHtml += '<div class="temp"><img src="img/weather/w_ico_raindrop.png" width="32px" height="26px"  class="icon-DB01" alt="빗방울">'+t1hList[i]+'<span>℃</span></div>';
						}else if(ptyList[i]==6){
							weatherHtml += '<div class="temp"><img src="img/weather/w_ico_wetSnow.png" width="32px" height="26px"  class="icon-DB01" alt="빗방울/눈날림">'+t1hList[i]+'<span>℃</span></div>';
						}else if(ptyList[i]==7){
							weatherHtml += '<div class="temp"><img src="img/weather/w_ico_snow.png" width="32px" height="26px"  class="icon-DB01" alt="눈날림">'+t1hList[i]+'<span>℃</span></div>';
						}
					}
					weatherHtml += '<ul class="flex_wrap">';
					weatherHtml += '<li>습도 : <span>'+rehList[i]+'&percnt;</span></li><li>강수량 : <span>'+pRainList[i]+'mm</span></li>';
					weatherHtml += '</ul></li>';
				}
				$("#fcst_form").html(weatherHtml);
			}
 		} 
	});
}


//********************
//우리동네 날씨 정보
//********************
function fn_vilageFcst() {
 	jsParamAjaxCall("POST", "/getVilageFcst.do", "", function(response, status){
 		if (response.result != null) {
			if (response.result == "success") {
				//강수확률 값
				var popList = response.popList;
				//강수형태 값
				var ptyList = response.ptyList;
				//하늘상태 값
				var skyList = response.skyList;
				//온도값 list
				var t3hList = response.t3hList;
				//강수량
				var pRainList = response.pRainList;
				
				//습도값 list
				var rehList = response.rehList;
				//예보 시간 list
				var fcstTimeList = response.fcstTimeList;
				
				var weatherHtml = '';
				var today = new Date();
				var vilageTime = new Array();
				for(var i=0; i<t3hList.length-1; i++){
					var str = fcstTimeList[i].substring(0,2);
					vilageTime[i] = str;
					weatherHtml += '<li><span class="time">'+str+'시</span>';
					if(ptyList[i]==0){ //강수 0일때
						//하늘상태 : 맑음(1), 구름많음(3), 흐림(4)
						if(skyList[i]==1){ 
							weatherHtml += '<div class="temp"><img src="img/weather/w_ico_sunny.png" width="32px" height="26px"  class="icon-DB01" alt="맑음">'+t3hList[i]+'<span>℃</span></div>';
						}else if(skyList[i]==3){
							weatherHtml += '<div class="temp"><img src="img/weather/w_ico_cloudy.png" width="32px" height="26px"  class="icon-DB01" alt="구름많음">'+t3hList[i]+'<span>℃</span></div>';
						}else if(skyList[i]==4){
							weatherHtml += '<div class="temp"><img src="img/weather/w_ico_cloude.png" width="32px" height="26px"  class="icon-DB01" alt="흐림">'+t3hList[i]+'<span>℃</span></div>';
						}
					}else{
						//강수형태(PTY) 코드 : 없음(0), 비(1), 비/눈(2), 눈(3), 소나기(4), 빗방울(5), 빗방울/눈날림(6), 눈날림(7)
						if(ptyList[i]==1){
							weatherHtml += '<div class="temp"><img src="img/weather/w_ico_rainy.png" width="32px" height="26px"  class="icon-DB01" alt="비">'+t3hList[i]+'<span>℃</span></div>';
						}else if(ptyList[i]==2){
							weatherHtml += '<div class="temp"><img src="img/weather/w_ico_wetSnow.png" width="32px" height="26px"  class="icon-DB01" alt="비/눈">'+t3hList[i]+'<span>℃</span></div>';
						}else if(ptyList[i]==3){
							weatherHtml += '<div class="temp"><img src="img/weather/w_ico_snow.png" width="32px" height="26px"  class="icon-DB01" alt="눈">'+t3hList[i]+'<span>℃</span></div>';
						}else if(ptyList[i]==4){
							weatherHtml += '<div class="temp"><img src="img/weather/w_ico_showers.png" width="32px" height="26px"  class="icon-DB01" alt="소나기">'+t3hList[i]+'<span>℃</span></div>';
						}else if(ptyList[i]==5){
							weatherHtml += '<div class="temp"><img src="img/weather/w_ico_raindrop.png" width="32px" height="26px"  class="icon-DB01" alt="빗방울">'+t3hList[i]+'<span>℃</span></div>';
						}else if(ptyList[i]==6){
							weatherHtml += '<div class="temp"><img src="img/weather/w_ico_wetSnow.png" width="32px" height="26px"  class="icon-DB01" alt="빗방울/눈날림">'+t3hList[i]+'<span>℃</span></div>';
						}else if(ptyList[i]==7){
							weatherHtml += '<div class="temp"><img src="img/weather/w_ico_snow.png" width="32px" height="26px"  class="icon-DB01" alt="눈날림">'+t3hList[i]+'<span>℃</span></div>';
						}
					}
					weatherHtml += '<ul class="flex_wrap">';
					weatherHtml += '<li>습도 : <span>'+rehList[i]+'&percnt;</span></li><li>강수량 : <span>'+pRainList[i]+'</span></li>';
					weatherHtml += '</ul></li>';
				}
				$("#fcst_form").append(weatherHtml);
			}
 		}
	});
};


//*****************************************
//** 시간별 온도 그래프
//** 2022.02.18 : 10분단위에서 시간단위로 변경
//*****************************************
function getLineAvgList(){
	var sensor_mac_sub = []
	var param = "sensor_gubun="+sensor_gubun+"&sensor_mac="+sensor_mac+"&sensor_mac_sub="+sensor_mac_sub;
	jsParamAjaxCall("POST", "/avgTimeTempList.do", param, function(response, status){
		if (response.result != null) {
			if (response.result == "success") {
				var pastAvgList = response.pastAvgList;									//과거 무강우, 평균 온도,습도
				var vilageTempReh = response.vilageTempReh;								//동네예보
				var preTempList = response.preTempList; 								//온도
				var presentTimeAvgGlobeList = response.presentTimeAvgGlobeList; 		//흑구온도				
				var preRehList = response.preRehList; 									//습도
				var preWindList = response.preWindList; 								//풍속
				
				tempChartInit(preTempList, pastAvgList, vilageTempReh);  						//온도
				globeTempChartInit(presentTimeAvgGlobeList,pastAvgList, vilageTempReh);			//흑구온도
				humidityChartInit(preRehList, pastAvgList, vilageTempReh);						//습도
				windChartInit(preWindList, pastAvgList, vilageTempReh);							//풍속

					if(preTempList.length > 0){
						$("#weather_temp").html("온도<br>" + preTempList[preTempList.length -1].temp + " °C");
					}
					if(preRehList.length > 0){
						$("#globe_temp").html("흑구온도<br>" + presentTimeAvgGlobeList[presentTimeAvgGlobeList.length -1].temp + " °C");
					}
					if(preWindList.length > 0){
						$("#nowWind").html("풍속<br>" + preWindList[preWindList.length -1].temp + " m/s");
					}
					if(preRehList.length > 0){
						$("#nowHumidity").html("습도<br>" + preRehList[preRehList.length -1].temp + " %");
					}
					
			}else{
				  alert(response.message);
			}
		}
	});
}

//과거 온도 (Bar Chart)
function getBarAvgList(){
	var param = "sensor_gubun="+sensor_gubun+"&sensor_mac="+sensor_mac;
	jsParamAjaxCall("POST", "/avgDayList.do", param, function(response, status){
		if (response.result != null) {
			if (response.result == "success") {
// 				var pastRainAvgList = response.pastRainAvgList;						//				
				var presentTempList = response.presentTempList;						//현재 온도 평균(일)
				var presentRehList = response.presentRehList; 						//현재 습도 평균(일)
				var presentAvgGlobeList = response.presentAvgGlobeList; 			//현재 흑구온도 평균(일)			
				var preWindList = response.preWindList;								//현재 풍속 평균(일)
				
				avgTempBarInit(presentTempList, presentAvgGlobeList);
				avgHumidityBarInit(preWindList, presentRehList);
				
			}else{
				  alert(response.message);
			}
		}
	});
}


function tempChartInit(preTempList, pastAvgList, vilageTempReh){
	var chNameData = new Array(); 
    var timeData = new Array(); 
    var ch1 = new Array(); 
    var ch2 = new Array(); 
    var ch3 = new Array(); 
    var ch4 = new Array(); 
    var ch5 = new Array();         
    
    var vilegeTime = vilageTempReh.fcstTimeList;
    var list = vilageTempReh.windList;
 
    var preList1 = new Array();
    var preList2 = new Array();
    
    if(hh>9){
    	for(var j=7; j > -1; j--){
    		if(hh>9 && (hh-j) >9){
    			timeData.push(hh-j);
    		}
    	}
    }

    for(var i =0;i<preTempList.length;i++){
    	if(preTempList[i].sensor_mac == "0000E415F64D88AD"){ // 온도 센서 2
    		preList1.push(preTempList[i]);
    	}else if(preTempList[i].sensor_mac == "0000B452A90C3BA5"){ // 온도 센서 5
    		preList2.push(preTempList[i]);
    	}
    }
    
    if(preList1.length >0){
    	for(var i =0;i<preList1.length;i++){
    		for(var h=0; h<timeData.length; h++){ // 센서 별, 시간대 별 값 할당 
//     			console.log(i + "/" + h + " : " + timeData[h]);
   				if(timeData[h] == preList1[i].time.substr(8,2)){
   					//console.log(timeData[h] + "/" + preList1[i].time.substr(8,2));
   					ch1[h] = preList1[i].temp;
   				}else{
   					if(ch1[h] != null){
   						
   					}else{
   						ch1[h] = null;
   					}
   					
   				}					
    		}
    	}
    }
	
    if(preList2.length >0){
    	for(var i =0;i<preList2.length;i++){
    		for(var h=0; h<timeData.length; h++){ // 센서 별, 시간대 별 값 할당 
    			//console.log(i + "/" + h + " : " + timeData[h]);
   				if(timeData[h] == preList2[i].time.substr(8,2)){
   					//console.log(timeData[h] + "/" + preList2[i].time.substr(8,2));
   					ch5[h] = preList2[i].temp;
   				}else{
   					if(ch5[h] != null){
   						
   					}else{
   						ch5[h] = null;
   					}
   					
   				}					
    		}
    	}
    }

    for(var j = 0; j < pastAvgList.length ; j++){
		for(var h=0; h<timeData.length; h++){
		//console.log(pastAvgList[j].time + "," + pastAvgList[j].time.substr(4,2));
			if(timeData[h] == pastAvgList[j].time.substr(4,2)){	
				ch3.push(pastAvgList[j].max_temp);
				ch4.push(pastAvgList[j].min_temp);
			}
		}
	}
		
	for(var k = 0; k < vilegeTime.length ; k++){
		for(var h=0; h<timeData.length; h++){
			if(timeData[h] == vilegeTime[k].substr(0,2)){	
				ch2.push(list[k]);
			}
		}
	}   
    
	var tempChart = echarts.init(document.getElementById('echart_temp'),'inforgraphic');
	var tempOption = {
    	    title: {
    	        show: ch3.length === 0,
    	        textStyle: {
    	            color: "grey",
    	            fontSize: 20
    	        },
    	        text: "조회 시간 : 10시~17시",
    	        left: "center",
    	        top: "center"
    	    }, 
    	    tooltip: {
    	        trigger: 'axis'
    	    },
    	    legend: {
    	        data: ['미세분무장치/송풍팬','미설치','예보', '최고', '최저']
    	    },
    	    xAxis: {
    	        type: 'category',
    	        boundaryGap: false,
    	        data:  timeData
    	    },
    	    yAxis: {
    	        type: 'value',
    	        max: function(item){
                    return (item.max * 1.2).toFixed();
                },
    	        axisLabel: {
    	            formatter: '{value} °C',
    	            fontSize: '10'
    	        }
    	    },
    	    series: [  
    	    	{
		            name: '미세분무장치/송풍팬',
		            type: 'line',
		            data: ch1,
		            color:'#B723F6'
		        },     	    	
    	    	{
		            name: '미설치',
		            type: 'line',
		            data: ch5,
		            color:'#56B37F'
		        },     	    	
		        {
		            name: '예보',
		            type: 'line',
		            data: ch2,
		            color: '#282828'
		        },  
		        {
		            name: '최고',
		            type: 'line',
		            data: ch3,
		            color: '#F06E6E'
		        },  
		        {
		            name: '최저',
		            type: 'line',
		            data: ch4,
		            color: '#8F7CEE'
		        }
	        ]
	};
	tempChart.setOption(tempOption);
	
	//console.log("온도시간별그래프");
}

//*****************************************
//**  현재 흑구온도 그래프
//*****************************************

function globeTempChartInit(preList,pastAvgList, vilageTempReh){

    var timeData = new Array(); 
    var ch1 = new Array(); 
    var ch2 = new Array();
    var ch3 = new Array(); 
    var ch4 = new Array();
    var ch5 = new Array(); 
    
    var preList1 = new Array();
    var preList2 = new Array();
    
    var vilegeTime = vilageTempReh.fcstTimeList;
    var list = vilageTempReh.windList;
    
    if(hh>9){
    	for(var j=7; j > -1; j--){
    		if(hh>9 && (hh-j) >9){
    			timeData.push(hh-j);
    		}
    	}
    }

    //console.log(timeData);
    for(var i =0;i<preList.length;i++){
    	if(preList[i].sensor_mac == "0000E415F64D88AD"){ // 습도 센서 2
    		preList1.push(preList[i]);
    	}else if(preList[i].sensor_mac == "0000B452A90C3BA5"){ // 습도 센서 5
    		preList2.push(preList[i]);
    	}
    }
    
    //console.log(preList1);
    
    if(preList1.length >0){
    	for(var i =0;i<preList1.length;i++){
    		for(var h=0; h<timeData.length; h++){ // 센서 별, 시간대 별 값 할당 
    			//console.log(i + "/" + h + " : " + timeData[h]);
   				if(timeData[h] == preList1[i].time.substr(8,2)){
   					//console.log(timeData[h] + "/" + preList1[i].time.substr(8,2));
   					ch1[h] = preList1[i].temp;
   				}else{
   					if(ch1[h] != null){
   						
   					}else{
   						ch1[h] = null;
   					}
   					
   				}					
    		}
    	}
    }
    
    //console.log(ch1);	
	
    if(preList2.length >0){
    	for(var i =0;i<preList2.length;i++){
    		for(var h=0; h<timeData.length; h++){ // 센서 별, 시간대 별 값 할당 
    			//console.log(i + "/" + h + " : " + timeData[h]);
   				if(timeData[h] == preList2[i].time.substr(8,2)){
   					//console.log(timeData[h] + "/" + preList2[i].time.substr(8,2));
   					ch2[h] = preList2[i].temp;
   				}else{
   					if(ch2[h] != null){
   						
   					}else{
   						ch2[h] = null;
   					}
   					
   				}					
    		}
    	}
    }
    
    for(var j = 0; j < pastAvgList.length ; j++){
		for(var h=0; h<timeData.length; h++){
		//console.log(pastAvgList[j].time + "," + pastAvgList[j].time.substr(4,2));
			if(timeData[h] == pastAvgList[j].time.substr(4,2)){	
				ch3.push(pastAvgList[j].max_temp);
				ch4.push(pastAvgList[j].min_temp);
			}
		}
	}
		
	for(var k = 0; k < vilegeTime.length ; k++){
		for(var h=0; h<timeData.length; h++){
			if(timeData[h] == vilegeTime[k].substr(0,2)){	
				ch5.push(list[k]);
			}
		}
	}  
	
	var tempChart = echarts.init(document.getElementById('echart_globeTemp'),'inforgraphic');
	var tempOption = {
    	    title: {
    	        show: ch2.length === 0,
    	        textStyle: {
    	            color: "grey",
    	            fontSize: 20
    	        },
    	        text: "조회 시간 : 10시~17시",
    	        left: "center",
    	        top: "center"
    	    }, 
    	    tooltip: {
    	        trigger: 'axis'
    	    },
    	    legend: {
    	        data: ['미세분무장치/송풍팬','미설치','예보', '최고', '최저']
    	    },
    	    xAxis: {
    	        type: 'category',
    	        boundaryGap: false,
    	        data:  timeData
    	    },
    	    yAxis: {
    	        type: 'value',
    	        max: function(item){
                    return (item.max * 1.2).toFixed();
                },
    	        axisLabel: {
    	            formatter: '{value} °C',
    	            fontSize: '10'
    	        }
    	    },
    	    series: [
    	    	{
		            name: '미세분무장치/송풍팬',
		            type: 'line',
		            data: ch1,
		            color:'#B723F6'
	        	},
	        	{
		            name: '미설치',
		            type: 'line',
		            data: ch2,
		            color:'#56B37F'
		        },
		        {
		            name: '예보',
		            type: 'line',
		            data: ch3,
		            color: '#282828'
		        },  
		        {
		            name: '최고',
		            type: 'line',
		            data: ch4,
		            color: '#F06E6E'
		        },  
		        {
		            name: '최저',
		            type: 'line',
		            data: ch5,
		            color: '#8F7CEE'
		        }
    	    ]
	};
	tempChart.setOption(tempOption);
}


//*****************************************
//**  현재 습도 그래프
//*****************************************

function humidityChartInit(preRehList, pastAvgList, vilageTempReh){
	var chNameData = new Array(); 
    var timeData = new Array(); 
    var ch1 = new Array(); 
    var ch2 = new Array(); 
    var ch3 = new Array(); 
    var ch4 = new Array(); 
    var ch5 = new Array();         
    
    var vilegeTime = vilageTempReh.fcstTimeList;
    var list = vilageTempReh.windList;
 
    var preList1 = new Array();
    var preList2 = new Array();

    
    if(hh>9){
    	for(var j=7; j > -1; j--){
    		if(hh>9 && (hh-j) >9){
    			timeData.push(hh-j);
    		}
    	}
    }

    //console.log(timeData);
    for(var i =0;i<preRehList.length;i++){
    	if(preRehList[i].sensor_mac == "0000E415F64D88AD"){ // 습도 센서 2
    		preList1.push(preRehList[i]);
    	}else if(preRehList[i].sensor_mac == "0000B452A90C3BA5"){ // 습도 센서 5
    		preList2.push(preRehList[i]);
    	}
    }
	
    if(preList1.length >0){
    	for(var i =0;i<preList1.length;i++){
    		for(var h=0; h<timeData.length; h++){ // 센서 별, 시간대 별 값 할당 
    			//console.log(i + "/" + h + " : " + timeData[h]);
   				if(timeData[h] == preList1[i].time.substr(8,2)){
   					//console.log(timeData[h] + "/" + preList1[i].time.substr(8,2));
   					ch1[h] = preList1[i].temp;
   				}else{
   					if(ch1[h] != null){
   						
   					}else{
   						ch1[h] = null;
   					}
   					
   				}					
    		}
    	}
    }
    
    //console.log(ch1);	
	
    if(preList2.length >0){
    	for(var i =0;i<preList2.length;i++){
    		for(var h=0; h<timeData.length; h++){ // 센서 별, 시간대 별 값 할당 
    			//console.log(i + "/" + h + " : " + timeData[h]);
   				if(timeData[h] == preList2[i].time.substr(8,2)){
   					//console.log(timeData[h] + "/" + preList2[i].time.substr(8,2));
   					ch5[h] = preList2[i].temp;
   				}else{
   					if(ch5[h] != null){
   						
   					}else{
   						ch5[h] = null;
   					}
   					
   				}					
    		}
    	}
    }
    
    for(var j = 0; j < pastAvgList.length ; j++){
		for(var h=0; h<timeData.length; h++){
		//console.log(pastAvgList[j].time + "," + pastAvgList[j].time.substr(4,2));
			if(timeData[h] == pastAvgList[j].time.substr(4,2)){	
				ch3.push(pastAvgList[j].max_humidity);
				ch4.push(pastAvgList[j].min_humidity);
			}
		}
	}
		
	for(var k = 0; k < vilegeTime.length ; k++){
		for(var h=0; h<timeData.length; h++){
			if(timeData[h] == vilegeTime[k].substr(0,2)){	
				ch2.push(list[k]);
			}
		}
	}   
    
	var humidityChart = echarts.init(document.getElementById('echart_humidity'),'inforgraphic');
	var humidityOption = {
    	    title: {
    	        show: ch3.length === 0,
    	        textStyle: {
    	            color: "grey",
    	            fontSize: 20
    	        },
    	        text: "조회 시간 : 10시~17시",
    	        left: "center",
    	        top: "center"
    	    }, 
    	    tooltip: {
    	        trigger: 'axis'
    	    },
    	    legend: {
    	    	data: ['미세분무장치/송풍팬','미설치','예보', '최고', '최저']
    	    },
    	    xAxis: {
    	        type: 'category',
    	        boundaryGap: false,
    	        data:  timeData
    	    },
    	    yAxis: {
    	        type: 'value',
    	        max: function(item){
                    return (item.max * 1.2).toFixed();
                },
    	        axisLabel: {
    	        	formatter: '{value} %'
    	        }
    	    },
    	    series: [ 
    	    	{
		            name: '미세분무장치/송풍팬',
		            type: 'line',
		            data: ch1,
		            color:'#B723F6'
		        },     	    	
    	    	{
		            name: '미설치',
		            type: 'line',
		            data: ch5,
		            color:'#56B37F'
		        },         	    	
		        {
		            name: '예보',
		            type: 'line',
		            data: ch2,
		            color: '#282828'
		        },  
		        {
		            name: '최고',
		            type: 'line',
		            data: ch3,
		            color: '#F06E6E'
		        },  
		        {
		            name: '최저',
		            type: 'line',
		            data: ch4,
		            color: '#8F7CEE'
		        }
	        ]
	};
	humidityChart.setOption(humidityOption);
}

//*****************************************
//**  현재 풍속 그래프
//*****************************************

function windChartInit(preWindList, pastAvgList, vilageTempReh){
	
	
	var chNameData = new Array(); 
    var timeData = new Array(); 
    var ch1 = new Array(); 
    var ch2 = new Array(); 
    var ch3 = new Array(); 
    var ch4 = new Array(); 
    var ch5 = new Array();         
    
    var vilegeTime = vilageTempReh.fcstTimeList;
    var list = vilageTempReh.windList;
 
    var preList1 = new Array();
    var preList2 = new Array();
    
    if(hh>9){
    	for(var j=7; j > -1; j--){
    		if(hh>9 && (hh-j) >9){
    			timeData.push(hh-j);
    		}
    	}
    }

    //console.log(timeData);
    for(var i =0;i<preWindList.length;i++){
    	if(preWindList[i].sensor_mac == "0000E415F64D8A2F"){ // 풍속 센서 2
    		preList1.push(preWindList[i]);
    	}else if(preWindList[i].sensor_mac == "0000B452A90C71ED"){ // 풍속 센서 5
    		preList2.push(preWindList[i]);
    	}
    }
	
    
    if(preList1.length >0){
    	for(var i =0;i<preList1.length;i++){
    		for(var h=0; h<timeData.length; h++){ // 센서 별, 시간대 별 값 할당 
    			//console.log(i + "/" + h + " : " + timeData[h]);
   				if(timeData[h] == preList1[i].time.substr(8,2)){
   					//console.log(timeData[h] + "/" + preList1[i].time.substr(8,2));
   					ch1[h] = preList1[i].temp;
   				}else{
   					if(ch1[h] != null){
   						
   					}else{
   						ch1[h] = null;
   					}
   					
   				}					
    		}
    	}
    }
    
    //console.log(ch1);	
	
    if(preList2.length >0){
    	for(var i =0;i<preList2.length;i++){
    		for(var h=0; h<timeData.length; h++){ // 센서 별, 시간대 별 값 할당 
    			//console.log(i + "/" + h + " : " + timeData[h]);
   				if(timeData[h] == preList2[i].time.substr(8,2)){
   					//console.log(timeData[h] + "/" + preList2[i].time.substr(8,2));
   					ch5[h] = preList2[i].temp;
   				}else{
   					if(ch5[h] != null){
   						
   					}else{
   						ch5[h] = null;
   					}
   					
   				}					
    		}
    	}
    }
    
    for(var j = 0; j < pastAvgList.length ; j++){
		for(var h=0; h<timeData.length; h++){
		//console.log(pastAvgList[j].time + "," + pastAvgList[j].time.substr(4,2));
			if(timeData[h] == pastAvgList[j].time.substr(4,2)){	
				ch3.push(pastAvgList[j].max_wind);
				ch4.push(pastAvgList[j].min_wind);
			}
		}
	}
		
	for(var k = 0; k < vilegeTime.length ; k++){
		for(var h=0; h<timeData.length; h++){
			if(timeData[h] == vilegeTime[k].substr(0,2)){	
				ch2.push(list[k]);
			}
		}
	}   

	var windChart = echarts.init(document.getElementById('echart_wind'),'inforgraphic');
	var windOption = {
    	    title: {
    	        show: ch3.length === 0,
    	        textStyle: {
    	            color: "grey",
    	            fontSize: 20
    	        },
    	        text: "조회 시간 : 10시~17시",
    	        left: "center",
    	        top: "center"
    	    }, 
    	    tooltip: {
    	        trigger: 'axis'
    	    },
    	    legend: {
    	        data: ['미세분무장치/송풍팬','미설치','예보', '최고', '최저']
    	    },
    	    xAxis: {
    	        type: 'category',
    	        boundaryGap: false,
    	        data:  timeData
    	    },
    	    yAxis: {
    	        type: 'value',
    	        max: function(item){
                    return (item.max * 1.2).toFixed();
                },
                min :function(item){
                    return 0;
                },
    	        axisLabel: {
    	        	formatter: '{value} m/s'
    	        }
    	    },
    	    series: [
    	    	{
		            name: '미세분무장치/송풍팬',
		            type: 'line',
		            data: ch1,
		            color:'#B723F6'
		        },     	    	
    	    	{
		            name: '미설치',
		            type: 'line',
		            data: ch5,
		            color:'#56B37F'
		        },     	        	    	
		        {
		            name: '예보',
		            type: 'line',
		            data: ch2,
		            color: '#282828'
		        },  
		        {
		            name: '최고',
		            type: 'line',
		            data: ch3,
		            color: '#F06E6E'
		        },  
		        {
		            name: '최저',
		            type: 'line',
		            data: ch4,
		            color: '#8F7CEE'
		        }
	        ]
	};
	windChart.setOption(windOption);
}


function avgHumidityBarInit(preWindList, preRehList){
	
	
// 	console.log(preTimArr);
// 	console.log("preWindList : " + JSON.stringify(preWindList));
// 	console.log("preRehList : " + JSON.stringify(preRehList));
	
    var preWindAvg1 = new Array(); 
    var preWindAvg2 = new Array();     
	var presentAvg1 = new Array();   
	var presentAvg2 = new Array();   
	
	var ch1 = new Array();
	var ch2 = new Array();
	var ch3 = new Array();
	var ch4 = new Array();

    //console.log(preWindList);
    for(var i =0;i<preWindList.length;i++){
    	if(preWindList[i].sensor_mac == "0000E415F64D8A2F"){ // 풍속 센서 2
    		preWindAvg1.push(preWindList[i]);
    	}else if(preWindList[i].sensor_mac == "0000B452A90C71ED"){ // 풍속 센서 5
    		preWindAvg2.push(preWindList[i]);
    	}
    }
    
    for(var i =0;i<preRehList.length;i++){
    	if(preRehList[i].sensor_mac == "0000E415F64D88AD"){ //습도 센서 2
    		presentAvg1.push(preRehList[i]);
    	}else if(preRehList[i].sensor_mac == "0000B452A90C3BA5"){ //습도 센서 5
    		presentAvg2.push(preRehList[i]);
    	}
    }    
    
    
    //console.log(preWindAvg1);
    //console.log(preWindAvg2);
    //console.log(presentAvg1);
    //console.log(presentAvg2);
    

    if(preWindAvg1.length >0){
    	for(var i =0;i<preWindAvg1.length;i++){
    		for(var h=0; h<preTimArr.length; h++){ // 센서 별, 시간대 별 값 할당 
    			//console.log(i + "/" + h + " : " + timeData[h]);
   				if(preTimArr[h] == preWindAvg1[i].time){
   					ch1[h] = preWindAvg1[i].temp;
   				}else{
   					if(ch1[h] != null){
   						
   					}else{
   						ch1[h] = null;
   					}
   					
   				}					
    		}
    	}
    }
	//console.log(ch1);
    
    if(preWindAvg2.length >0){
    	for(var i =0;i<preWindAvg2.length;i++){
    		for(var h=0; h<preTimArr.length; h++){ // 센서 별, 시간대 별 값 할당 
    			//console.log(i + "/" + h + " : " + timeData[h]);
   				if(preTimArr[h] == preWindAvg2[i].time){
   					//console.log(timeData[h] + "/" + preList2[i].time.substr(8,2));
   					ch2[h] = preWindAvg2[i].temp;
   				}else{
   					if(ch2[h] != null){
   						
   					}else{
   						ch2[h] = null;
   					}
   					
   				}					
    		}
    	}
    }    
	

	//console.log(ch2);
    if(presentAvg1.length >0){
    	for(var i =0;i<presentAvg1.length;i++){
    		for(var h=0; h<preTimArr.length; h++){ // 센서 별, 시간대 별 값 할당 
    			//console.log(i + "/" + h + " : " + timeData[h]);
   				if(preTimArr[h] == presentAvg1[i].time){
   					//console.log(timeData[h] + "/" + preList2[i].time.substr(8,2));
   					ch3[h] = presentAvg1[i].temp;
   				}else{
   					if(ch3[h] != null){
   						
   					}else{
   						ch3[h] = null;
   					}
   					
   				}					
    		}
    	}
    }      
    
    if(presentAvg2.length >0){
    	for(var i =0;i<presentAvg2.length;i++){
    		for(var h=0; h<preTimArr.length; h++){ // 센서 별, 시간대 별 값 할당 
    			//console.log(i + "/" + h + " : " + timeData[h]);
   				if(preTimArr[h] == presentAvg2[i].time){
   					//console.log(timeData[h] + "/" + preList2[i].time.substr(8,2));
   					ch4[h] = presentAvg2[i].temp;
   				}else{
   					if(ch4[h] != null){
   						
   					}else{
   						ch4[h] = null;
   					}
   					
   				}					
    		}
    	}
    }    
	
    //console.log(ch1); 
   // console.log(ch1.length);
    
    var avgHumidity = echarts.init(document.getElementById('tump4'),'inforgraphic');
	
	option = {
	 title: {
	        show: ch1.length === 0,
	        textStyle: {
	            color: "grey",
	            fontSize: 20
	        },
	        text: "NO DATA",
	        left: "center",
	        top: "center"
	  }, 
	  tooltip: {
	      trigger: 'axis'
	  },
	  legend: {
	  	  data: ['풍속:미세분무장치/송풍팬','풍속:미설치', '습도:미세분무장치/송풍팬','습도:미설치']
	  },    
	  calculable: true,
	  xAxis: [
	      {
	          type: 'category',
	          data: preTimArr
	      }
	  ],
	  yAxis: [
	      {
	          type: 'value',
// 	          name : '풍속',
	          nameGap: -190,
	          nameTextStyle: {
	          backgroundColor: '#ffe4c4'
	          },
	          axisLabel: {
  	            formatter: '{value} m/s'
  	          }
	      },{
	          type: 'value',
// 	          name : '습도',
	          nameGap: -190,
	          nameTextStyle: {
	          backgroundColor: '#ffe4c4'
	          },	          
	          axisLabel: {
  	            formatter: '{value} %'
  	        }
	      }
	  ],
	  series: [
	      {
	          name: '풍속:미세분무장치/송풍팬',
	          type: 'bar',
	          data: ch1,
	          color:'#F06E6E'
	      },{
	          name: '풍속:미설치',
	          type: 'bar',
	          yAxisIndex: 0,
	          data: ch2,
	          color:'#EB4646'
	      },
	      {
	          name: '습도:미세분무장치/송풍팬',
	          type: 'bar',
	          yAxisIndex: 1,
	          data: ch3,
	          color:'#8F7CEE'
	      },{
	          name: '습도:미설치',
	          type: 'bar',
	          yAxisIndex: 1,
	          data: ch4,
	          color:'#5050FF'
	      }	      
	  	]
	};
	avgHumidity.setOption(option);
}

function avgTempBarInit(presentAvgList, presentAvgGlobeList){
	
    var preAvg1 = new Array(); 
    var preAvg2 = new Array();
	var gloAvg1 = new Array(); 
	var gloAvg2 = new Array(); 	
	
	var ch1 = new Array();
	var ch2 = new Array();
	var ch3 = new Array();
	var ch4 = new Array();
	
    for(var i =0;i<presentAvgList.length;i++){
    	if(presentAvgList[i].sensor_mac == "0000E415F64D88AD"){ // 온도 센서 2
    		preAvg1.push(presentAvgList[i]);
    	}else if(presentAvgList[i].sensor_mac == "0000B452A90C3BA5"){ // 온도 센서 5
    		preAvg2.push(presentAvgList[i]);
    	}
    }
    
    for(var i =0;i<presentAvgGlobeList.length;i++){
    	if(presentAvgGlobeList[i].sensor_mac == "0000E415F64D88AD"){ //흑구 온도 센서 2
    		gloAvg1.push(presentAvgGlobeList[i]);
    	}else if(presentAvgGlobeList[i].sensor_mac == "0000B452A90C3BA5"){ //흑구 온도 센서 5
    		gloAvg2.push(presentAvgGlobeList[i]);
    	}
    }    

    if(preAvg1.length >0){
    	for(var i =0;i<preAvg1.length;i++){
    		for(var h=0; h<preTimArr.length; h++){ // 센서 별, 시간대 별 값 할당 
    			//console.log(i + "/" + h + " : " + timeData[h]);
   				if(preTimArr[h] == preAvg1[i].time){
   					ch1[h] = preAvg1[i].temp;
   				}else{
   					if(ch1[h] != null){
   						
   					}else{
   						ch1[h] = null;
   					}
   					
   				}					
    		}
    	}
    }    
    
    if(preAvg2.length >0){
    	for(var i =0;i<preAvg2.length;i++){
    		for(var h=0; h<preTimArr.length; h++){ // 센서 별, 시간대 별 값 할당 
    			//console.log(i + "/" + h + " : " + timeData[h]);
   				if(preTimArr[h] == preAvg2[i].time){
   					ch2[h] = preAvg2[i].temp;
   				}else{
   					if(ch2[h] != null){
   						
   					}else{
   						ch2[h] = null;
   					}
   					
   				}					
    		}
    	}
    }        

    
    if(gloAvg1.length >0){
    	for(var i =0;i<gloAvg1.length;i++){
    		for(var h=0; h<preTimArr.length; h++){ // 센서 별, 시간대 별 값 할당 
    			//console.log(i + "/" + h + " : " + timeData[h]);
   				if(preTimArr[h] == gloAvg1[i].time){
   					ch3[h] = gloAvg1[i].temp;
   				}else{
   					if(ch3[h] != null){
   						
   					}else{
   						ch3[h] = null;
   					}
   					
   				}					
    		}
    	}
    }  
	
    if(gloAvg2.length >0){
    	for(var i =0;i<gloAvg2.length;i++){
    		for(var h=0; h<preTimArr.length; h++){ // 센서 별, 시간대 별 값 할당 
    			//console.log(i + "/" + h + " : " + timeData[h]);
   				if(preTimArr[h] == gloAvg2[i].time){
   					ch4[h] = gloAvg2[i].temp;
   				}else{
   					if(ch4[h] != null){
   						
   					}else{
   						ch4[h] = null;
   					}
   					
   				}					
    		}
    	}
    } 
    
    var avgTemp = echarts.init(document.getElementById('temp3'),'inforgraphic');
	
	option = {
	  title: {
	        show: ch1.length === 0,
	        textStyle: {
	            color: "grey",
	            fontSize: 20
	        },
	        text: "NO DATA",
	        left: "center",
	        top: "center"
	  }, 
	  tooltip: {
	      trigger: 'axis'
	  },
	  legend: {
		  data: ['온도:미세분무장치/송풍팬','온도:미설치', '흑구온도:미세분무장치/송풍팬','흑구온도:미설치']
	  },    
	  calculable: true,
	  xAxis: [
	      {
	          type: 'category',
	          data: preTimArr
	      }
	  ],
	  yAxis: [
	      {
	          type: 'value',
// 	          name : '온도',
	          nameGap: -190,
	          nameTextStyle: {
	          backgroundColor: '#ffe4c4'
	          },		          
	          axisLabel: {
  	            formatter: '{value} °C'
  	        }
	      },{
	          type: 'value',
// 	          name : '흑구온도',
	          nameGap: -190,
	          nameTextStyle: {
	          backgroundColor: '#ffe4c4'
	          },		          
	          axisLabel: {
  	            formatter: '{value} °C'
  	        }
	      }
	  ],
	  series: [
		  {
	          name: '온도:미세분무장치/송풍팬',
	          type: 'bar',
	          data: ch1,
	          color:'#F06E6E'
	      },
	      {
	          name: '온도:미설치',
	          type: 'bar',
	          yAxisIndex: 0,
	          data: ch2,
	          color:'#EB4646'
	      },
	      {
	          name: '흑구온도:미세분무장치/송풍팬',
	          type: 'bar',
	          yAxisIndex: 1,
	          data: ch3,
	          color:'#8F7CEE'
	      },
	      {
	          name: '흑구온도:미설치',
	          type: 'bar',
	          yAxisIndex: 1,
	          data: ch4,
	          color:'#5050FF'
	      }
	  ]
	}
	avgTemp.setOption(option);
}



// 날씨슬라이드
var slideWrap = $('.slideWrap'),
    slideCont = $('.slide_items'),
    slideItm = $('.slide_items > li'),    
    slideItmL = slideItm.length,
    maxItm = 6,
    minItm = 5,
    curItm,
    aniT = 500,
    currentIdx = 0;

 
function slideInit(){
	var slideWrapW = slideWrap.outerWidth(true);
    curItm = (slideWrapW < 840 ) ? curItm = minItm : curItm = maxItm;
    wrapW = (slideWrapW - 0) / curItm;
    slideItm.css('width', wrapW);
    var slideItmSize = {
      width : Math.ceil(slideItm.outerWidth(true)),
      height : slideItm.outerHeight(true)
    };
    slideCont.width(slideItmSize.width * slideItmL);
    slideWrap.height('88px');
}
  
$('.btn_remote').on('click',function(){
    var btnCheck = $(this).hasClass('btn_next');
    cur = currentIdx;
    (btnCheck) ? nextSlide(cur) : prevSlide(cur);
});

function nextSlide(cur){
    var nextIdx = cur + 1 , maxIdx;
    (slideItmL <= curItm) ? maxIdx = 0 : maxIdx = slideItmL / curItm;
    if(nextIdx >= maxIdx) nextIdx = 0;
    slideCont.animate({left : -slideWrap.width() * nextIdx}, aniT);
    currentIdx = nextIdx;
    return currentIdx;
}

function prevSlide(cur){
    var prevIdx = cur, maxIdx;
    (slideItmL <= curItm) ? maxIdx = 0 : maxIdx = Math.ceil((slideItmL / curItm) - 1);
    (prevIdx <= 0) ? prevIdx = maxIdx : prevIdx = cur - 1;
    slideCont.animate({left : - slideWrap.width() * prevIdx}, aniT);
    currentIdx = prevIdx;
    return currentIdx;
}
  
  
slideInit();
$(window).on('resize',function(){
	slideInit();
});
</script>
		</div> 
	</div>
</body>
</html>
